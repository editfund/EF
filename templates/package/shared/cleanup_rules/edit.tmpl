<h4 class="ui top attached header">{{if .IsEditRule}}{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.edit"}}{{else}}{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.add"}}{{end}}</h4>
<div class="ui attached segment">
	<form class="ui form" action="{{.Link}}" method="post">
		{{.CsrfTokenHtml}}
		<input name="id" type="hidden" value="{{.CleanupRule.ID}}">
		<div class="field">
			<div class="ui checkbox">
				<label>{{ctx.Locale.Tr "enabled"}}</label>
				<input type="checkbox" name="enabled" {{if .CleanupRule.Enabled}}checked{{end}}>
			</div>
		</div>
		<div class="{{if .IsEditRule}}disabled {{end}}field {{if .Err_Type}}error{{end}}">
			<label>{{ctx.Locale.Tr "packages.filter.type"}}</label>
			<select class="ui selection dropdown" name="type">
				{{range $type := .AvailableTypes}}
				<option{{if eq $.CleanupRule.Type $type}} selected="selected"{{end}} value="{{$type}}">{{$type.Name}}</option>
				{{end}}
			</select>
		</div>
		<div class="field">
			<div class="ui checkbox">
				<label>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.pattern_full_match"}}</label>
				<input type="checkbox" name="match_full_name" {{if .CleanupRule.MatchFullName}}checked{{end}}>
			</div>
		</div>
		<div class="divider"></div>
		<p>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.keep.title"}}</p>
		<div class="field {{if .Err_KeepCount}}error{{end}}">
			<label>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.keep.count"}}:</label>
			<input id="keep_count" name="keep_count" type="number" min="0" value="{{.CleanupRule.KeepCount}}">
			<p class="help">{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.keep.count.zero_count_desc"}}</p>
		</div>
		<div class="field {{if .Err_KeepPattern}}error{{end}}">
			<label>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.keep.pattern"}}:</label>
			<input name="keep_pattern" type="text" value="{{.CleanupRule.KeepPattern}}">
			<p>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.keep.pattern.container"}}</p>
		</div>
		<div class="divider"></div>
		<p>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.remove.title"}}</p>
		<div class="field {{if .Err_RemoveDays}}error{{end}}">
			<label>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.remove.days"}}:</label>
			<input id="remove_days" name="remove_days" type="number" min="0" value="{{.CleanupRule.RemoveDays}}">
			<p class="help">{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.remove.days.zero_days_desc"}}</p>
		</div>
		<div class="field {{if .Err_RemovePattern}}error{{end}}">
			<label>{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.remove.pattern"}}:</label>
			<input name="remove_pattern" type="text" value="{{.CleanupRule.RemovePattern}}">
		</div>
		<div class="field">
			{{if .IsEditRule}}
			<button class="ui primary button" name="action" value="save">{{ctx.Locale.Tr "save"}}</button>
			<button class="ui red button" name="action" value="remove">{{ctx.Locale.Tr "remove"}}</button>
			<a class="ui button" href="{{.Link}}/preview">{{ctx.Locale.Tr "packages.owner.settings.cleanuprules.preview"}}</a>
			{{else}}
			<button class="ui primary button" name="action" value="save">{{ctx.Locale.Tr "add"}}</button>
			{{end}}
		</div>
	</form>
</div>
